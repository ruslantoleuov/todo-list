(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var s=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===s?new Date(t.getTime()):"number"==typeof t||"[object Number]"===s?new Date(t):("string"!=typeof t&&"[object String]"!==s||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function s(s){e(1,arguments);var a=t(s);return a.setHours(0,0,0,0),a}function a(t,a){e(2,arguments);var o=s(t),n=s(a);return o.getTime()===n.getTime()}function o(t){return e(1,arguments),a(t,Date.now())}function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function i(s,a){e(1,arguments);var o=a||{},i=o.locale,d=i&&i.options&&i.options.weekStartsOn,r=null==d?0:n(d),c=null==o.weekStartsOn?r:n(o.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=t(s),u=l.getDay(),f=(u<c?7:0)+u-c;return l.setDate(l.getDate()-f),l.setHours(0,0,0,0),l}function d(t,s,a){e(2,arguments);var o=i(t,a),n=i(s,a);return o.getTime()===n.getTime()}function r(t,s){return e(1,arguments),d(t,Date.now(),s)}var c,l=new Uint8Array(16);function u(){if(!c&&!(c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(l)}const f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,p=function(e){return"string"==typeof e&&f.test(e)};for(var m=[],g=0;g<256;++g)m.push((g+256).toString(16).substr(1));const v=function(e,t,s){var a=(e=e||{}).random||(e.rng||u)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){s=s||0;for(var o=0;o<16;++o)t[s+o]=a[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]).toLowerCase();if(!p(s))throw TypeError("Stringified UUID is invalid");return s}(a)},L={defaultProject:[],projects:[]};document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("container");e.innerHTML='\n    <div class="modal">\n      <div class="modal-details hide">\n        <div class="modal-titlebar">\n          <span>Details</span>\n          <svg class="modal-titlebar-logo" viewBox="0 0 24 24">\n            <path\n              d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"\n            />\n          </svg>\n        </div>\n        <div class="modal-details-text"></div>\n      </div>\n      <form class="modal-form-container hide">\n        <div class="modal-titlebar">\n          <span>Create a new task</span>\n          <svg class="modal-titlebar-logo" viewBox="0 0 24 24">\n            <path\n              d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"\n            />\n          </svg>\n        </div>\n        <div class="modal-form">\n          <input\n            class="modal-form-title"\n            type="text"\n            placeholder="Title: Pay bills"\n            maxlength="40"\n            required\n          />\n          <textarea\n            class="modal-form-textarea"\n            placeholder="Details: e.g. internet, phone, rent."\n          ></textarea>\n          <div class="modal-form-date">\n            <label for="modal-form-date-calendar">Due Date:</label>\n            <input id="modal-form-date-calendar" type="date" required />\n          </div>\n          <div class="modal-group-buttons">\n            <div class="modal-form-radio">\n              <span class="modal-form-radio-title">Priority:</span>\n              <input\n                type="radio"\n                id="low"\n                value="low"\n                name="form-radio"\n                checked\n              />\n              <label for="low">Low</label>\n              <input\n                type="radio"\n                id="medium"\n                value="medium"\n                name="form-radio"\n              />\n              <label for="medium">Medium</label>\n              <input type="radio" id="high" value="high" name="form-radio" />\n              <label for="high">High</label>\n            </div>\n            <button class="modal-form-add-button" type="submit">\n              Add Task\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n    <header class="header">\n      <svg class="header-logo" viewBox="0 0 24 24">\n        <path\n          d="M0.41,13.41L6,19L7.41,17.58L1.83,12M22.24,5.58L11.66,16.17L7.5,12L6.07,13.41L11.66,19L23.66,7M18,7L16.59,5.58L10.24,11.93L11.66,13.34L18,7Z"\n        />\n      </svg>\n    </header>\n    <aside class="aside">\n      <div class="aside-due-dates">\n        <div class="aside-due-dates-inbox selected">\n          <svg class="aside-logo" viewBox="0 0 24 24">\n            <path\n              d="M19,15H15A3,3 0 0,1 12,18A3,3 0 0,1 9,15H5V5H19M19,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3Z"\n            />\n          </svg>\n          <span>Inbox</span>\n        </div>\n        <div class="aside-due-dates-today">\n          <svg class="aside-logo" viewBox="0 0 24 24">\n            <path\n              d="M7,10H12V15H7M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3Z"\n            />\n          </svg>\n          <span>Today</span>\n        </div>\n        <div class="aside-due-dates-this-week">\n          <svg class="aside-logo" viewBox="0 0 24 24">\n            <path\n              d="M6 1H8V3H16V1H18V3H19C20.11 3 21 3.9 21 5V19C21 20.11 20.11 21 19 21H5C3.89 21 3 20.1 3 19V5C3 3.89 3.89 3 5 3H6V1M5 8V19H19V8H5M7 10H17V12H7V10Z"\n            />\n          </svg>\n          <span>This week</span>\n        </div>\n      </div>\n      <div class="aside-projects">\n        <span class="aside-projects-title">Projects</span>\n        <div class="aside-projects-container"></div>\n        <button class="aside-projects-add-prj-btn" type="button">\n          <svg class="aside-logo" viewBox="0 0 24 24">\n            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />\n          </svg>\n          <span>Add Project</span>\n        </button>\n        <div class="aside-projects-create hide">\n          <input class="aside-projects-input" type="text" />\n          <div class="aside-projects-buttons">\n            <button\n              class="aside-projects-btn aside-projects-cancel-btn"\n              type="button"\n            >\n              Cancel\n            </button>\n            <button\n              class="aside-projects-btn aside-projects-add-btn"\n              type="button"\n            >\n              Add\n            </button>\n          </div>\n        </div>\n      </div>\n    </aside>\n    <main class="main"></main>\n    <button class="add-btn" type="button">\n      <svg class="add-logo" viewBox="0 0 24 24">\n        <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />\n      </svg>\n    </button>\n    <footer class="footer">\n      Copyright &copy; 2022 Ruslan Toleuov\n      <a\n        href="https://github.com/ruslantoleuov"\n        target="_blank"\n        rel="noopener noreferrer"\n      >\n        <svg class="github-icon" viewBox="0 0 20 19.51549">\n          <path\n            d="M 10,0 A 10,10 0 0 0 0,10 c 0,4.42 2.87,8.17 6.84,9.5 0.5,0.08 0.66,-0.23 0.66,-0.5 0,-0.23 0,-0.86 0,-1.69 C 4.73,17.91 4.14,15.97 4.14,15.97 3.68,14.81 3.03,14.5 3.03,14.5 2.12,13.88 3.1,13.9 3.1,13.9 c 1,0.07 1.53,1.03 1.53,1.03 C 5.5,16.45 6.97,16 7.54,15.76 7.63,15.11 7.89,14.67 8.17,14.42 5.95,14.17 3.62,13.31 3.62,9.5 3.62,8.39 4,7.5 4.65,6.79 4.55,6.54 4.2,5.5 4.75,4.15 c 0,0 0.84,-0.27 2.75,1.02 0.79,-0.22 1.65,-0.33 2.5,-0.33 0.85,0 1.71,0.11 2.5,0.33 1.91,-1.29 2.75,-1.02 2.75,-1.02 0.55,1.35 0.2,2.39 0.1,2.64 0.65,0.71 1.03,1.6 1.03,2.71 0,3.82 -2.34,4.66 -4.57,4.91 0.36,0.31 0.69,0.92 0.69,1.85 0,1.34 0,2.42 0,2.74 0,0.27 0.16,0.59 0.67,0.5 C 17.14,18.16 20,14.42 20,10 A 10,10 0 0 0 10,0 Z"\n          />\n        </svg>\n      </a>\n    </footer>\n    ';const t=e.querySelector(".main"),s=e.querySelector(".aside"),a=s.querySelector(".aside-projects"),n=s.querySelector(".aside-due-dates"),i=n.querySelector(".aside-due-dates-inbox"),d=s.querySelector(".aside-projects-container"),c=a.querySelector(".aside-projects-add-prj-btn"),l=a.querySelector(".aside-projects-create"),u=l.querySelector(".aside-projects-input"),f=document.querySelector(".add-btn"),p=e.querySelector(".modal"),m=p.querySelector(".modal-details"),g=m.querySelector(".modal-details-text"),j=p.querySelector(".modal-form-container"),h=j.querySelector(".modal-titlebar span"),y=j.querySelector(".modal-form"),b=j.querySelector(".modal-form-title"),H=j.querySelector(".modal-form-textarea"),V=document.getElementById("modal-form-date-calendar"),w=j.querySelector(".modal-form-add-button");let x,S=i;const D=function(){localStorage.setItem("defaultProject",JSON.stringify(L.defaultProject)),localStorage.setItem("projects",JSON.stringify(L.projects))},k=function(e){const s=document.createElement("div");s.dataset.id=e.id,s.classList.add("main-todo"),s.classList.add(`priority-${e.priority}`),s.innerHTML=`\n      <div class="main-todo-title">\n        <input id="main-todo-checkbox" type="checkbox" ${e.isDone?"checked":""} />\n        <label for="main-todo-checkbox">${e.title}</label>\n      </div>\n      <div class="main-todo-controls-container">\n        <span class="main-todo-details">details</span>\n        <span class="main-todo-duedate">${e.dueDate}</span>\n        <svg class="main-todo-logo logo-edit" viewBox="0 0 24 24">\n          <path\n            d="M5,3C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19H5V5H12V3H5M17.78,4C17.61,4 17.43,4.07 17.3,4.2L16.08,5.41L18.58,7.91L19.8,6.7C20.06,6.44 20.06,6 19.8,5.75L18.25,4.2C18.12,4.07 17.95,4 17.78,4M15.37,6.12L8,13.5V16H10.5L17.87,8.62L15.37,6.12Z"\n          />\n        </svg>\n        <svg class="main-todo-logo logo-delete" viewBox="0 0 24 24">\n          <path\n            d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"\n          />\n        </svg>\n      </div>\n      `,t.appendChild(s)},M=function(e){if(t.innerHTML="",(e.classList.contains("aside-due-dates-inbox")||e.closest(".aside-due-dates-inbox"))&&L.defaultProject)for(const e of L.defaultProject)k(e);if((e.classList.contains("aside-due-dates-today")||e.closest(".aside-due-dates-today"))&&L.defaultProject)for(const e of L.defaultProject)o(new Date(e.dueDate))&&k(e);if((e.classList.contains("aside-due-dates-this-week")||e.closest(".aside-due-dates-this-week"))&&L.defaultProject)for(const e of L.defaultProject)r(new Date(e.dueDate),{weekStartsOn:1})&&k(e);if((e.classList.contains("aside-project")||e.closest(".aside-project"))&&L.projects)for(const t of L.projects)if(t.projectId===e.closest(".aside-project").dataset.id)for(const e of t.projectToDo)k(e)},C=function(e){const t=document.createElement("div");t.dataset.id=e.projectId,t.classList.add("aside-project"),t.innerHTML=`\n      <svg class="aside-project-logo" viewBox="0 0 24 24">\n        <path\n          d="M21,19V17H8V19H21M21,13V11H8V13H21M8,7H21V5H8V7M4,5V7H6V5H4M3,5A1,1 0 0,1 4,4H6A1,1 0 0,1 7,5V7A1,1 0 0,1 6,8H4A1,1 0 0,1 3,7V5M4,11V13H6V11H4M3,11A1,1 0 0,1 4,10H6A1,1 0 0,1 7,11V13A1,1 0 0,1 6,14H4A1,1 0 0,1 3,13V11M4,17V19H6V17H4M3,17A1,1 0 0,1 4,16H6A1,1 0 0,1 7,17V19A1,1 0 0,1 6,20H4A1,1 0 0,1 3,19V17Z"\n        />\n      </svg>\n      <span>${e.projectName}</span>\n      <svg class="aside-project-remove-logo" viewBox="0 0 24 24">\n        <path\n          d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"\n        />\n      </svg>\n      `,d.appendChild(t)},P=function(e){e.push(function(e,t,s,a,o,n=!1){return{id:e,title:t,description:s,dueDate:a,priority:o,isDone:n}}(v(),b.value,H.value,V.value,y.querySelector('input[name="form-radio"]:checked').value)),D()},A=function(e){e.id===x.dataset.id&&(e.title=b.value,e.description=H.value,e.dueDate=V.value,e.priority=y.querySelector('input[name="form-radio"]:checked').value,x.querySelector("label").textContent=e.title,x.classList.contains("priority-low")?x.classList.remove("priority-low"):x.classList.contains("priority-medium")?x.classList.remove("priority-medium"):x.classList.contains("priority-high")&&x.classList.remove("priority-high"),x.classList.add(`priority-${e.priority}`),x.querySelector(".main-todo-duedate").textContent=e.dueDate,D())},T=function(e,t){e.id===t.closest(".main-todo").dataset.id&&(e.isDone=t.checked)},q=function(e,t,s,a){e.id===a.closest(".main-todo").dataset.id&&(a.closest(".main-todo").remove(),s.splice(t,1))},E=function(e,t){e.closest(".aside-project").remove(),L.projects.splice(t,1)},I=function(e,t){e.id===t.closest(".main-todo").dataset.id&&(x=t.closest(".main-todo"),b.value=e.title,H.value=e.description,V.value=e.dueDate,y.querySelector(`input[value="${e.priority}"]`).checked=!0)},N=function(e,t){e.id===t.closest(".main-todo").dataset.id&&(g.textContent=e.description)},B=function(e){for(const e of d.children)e.classList.remove("selected");for(const e of n.children)e.classList.remove("selected");e.classList.add("selected")},O=function(e){p.classList.add("show"),e.classList.remove("hide")},Z=function(){m.classList.contains("hide")||m.classList.add("hide"),j.classList.contains("hide")||j.classList.add("hide"),g.textContent="",p.classList.remove("show"),h.textContent="Create a new task",w.textContent="Add Task"};!function(){if(JSON.parse(localStorage.getItem("defaultProject")))for(const e of JSON.parse(localStorage.getItem("defaultProject")))L.defaultProject.push(e),k(e);if(JSON.parse(localStorage.getItem("projects")))for(const e of JSON.parse(localStorage.getItem("projects")))L.projects.push(e),C(e)}(),s.addEventListener("click",(function(e){if(e.target.closest(".aside-projects-add-prj-btn")&&(c.classList.add("hide"),l.classList.remove("hide")),e.target.closest(".aside-projects-cancel-btn")&&(l.classList.add("hide"),c.classList.remove("hide"),u.value=""),e.target.closest(".aside-projects-add-btn")&&u.value&&(L.projects.push({projectName:u.value,projectId:v(),projectToDo:[]}),C(L.projects[L.projects.length-1]),l.classList.add("hide"),c.classList.remove("hide"),u.value="",D()),(e.target.classList.contains("aside-due-dates-inbox")||e.target.closest(".aside-due-dates-inbox"))&&(S=e.target.closest(".aside-due-dates-inbox"),B(S),M(e.target)),(e.target.classList.contains("aside-due-dates-today")||e.target.closest(".aside-due-dates-today"))&&(S=e.target.closest(".aside-due-dates-today"),B(S),M(e.target)),(e.target.classList.contains("aside-due-dates-this-week")||e.target.closest(".aside-due-dates-this-week"))&&(S=e.target.closest(".aside-due-dates-this-week"),B(S),M(e.target)),(e.target.classList.contains("aside-project")||e.target.closest(".aside-project"))&&(S=e.target.closest(".aside-project"),B(S),M(e.target)),e.target.classList.contains("aside-project-remove-logo")||e.target.closest(".aside-project-remove-logo")){if(S.classList.contains("aside-due-dates-inbox")||S.classList.contains("aside-due-dates-today")||S.classList.contains("aside-due-dates-this-week"))for(const[t,s]of L.projects.entries())s.projectId===e.target.closest(".aside-project").dataset.id&&E(e.target,t);else if(S.classList.contains("aside-project"))for(const[t,s]of L.projects.entries())s.projectId===e.target.closest(".aside-project").dataset.id&&(E(e.target,t),S=i,B(i),M(i));D()}})),t.addEventListener("click",(function(e){if(e.target.classList.contains("logo-edit")||e.target.closest(".logo-edit")){if(S.classList.contains("aside-due-dates-inbox")||S.classList.contains("aside-due-dates-today")||S.classList.contains("aside-due-dates-this-week"))for(const t of L.defaultProject)I(t,e.target);else if(S.classList.contains("aside-project"))for(const t of L.projects)for(const s of t.projectToDo)I(s,e.target);h.textContent="Edit",w.textContent="Confirm",O(j)}if(e.target.classList.contains("logo-delete")||e.target.closest(".logo-delete")){if(S.classList.contains("aside-due-dates-inbox")||S.classList.contains("aside-due-dates-today")||S.classList.contains("aside-due-dates-this-week"))for(const[t,s]of L.defaultProject.entries())q(s,t,L.defaultProject,e.target);else if(S.classList.contains("aside-project"))for(const t of L.projects)if(t.projectId===S.dataset.id)for(const[s,a]of t.projectToDo.entries())q(a,s,t.projectToDo,e.target);D()}if(e.target.classList.contains("main-todo-details")){if(S.classList.contains("aside-due-dates-inbox")||S.classList.contains("aside-due-dates-today")||S.classList.contains("aside-due-dates-this-week"))for(const t of L.defaultProject)N(t,e.target);else if(S.classList.contains("aside-project"))for(const t of L.projects)for(const s of t.projectToDo)N(s,e.target);O(m)}if("main-todo-checkbox"===e.target.id){if(S.classList.contains("aside-due-dates-inbox")||S.classList.contains("aside-due-dates-today")||S.classList.contains("aside-due-dates-this-week"))for(const t of L.defaultProject)T(t,e.target);else if(S.classList.contains("aside-project"))for(const t of L.projects)for(const s of t.projectToDo)T(s,e.target);D()}})),f.addEventListener("click",(function(){O(j)})),w.addEventListener("click",(function(){if("add task"===w.textContent.toLowerCase().trim()){if(b.value&&V.value)if(S.classList.contains("aside-due-dates-inbox"))P(L.defaultProject),k(L.defaultProject[L.defaultProject.length-1]);else if(S.classList.contains("aside-due-dates-today"))P(L.defaultProject),o(new Date(L.defaultProject.dueDate))&&k(L.defaultProject[L.defaultProject.length-1]);else if(S.classList.contains("aside-due-dates-this-week"))P(L.defaultProject),r(new Date(L.defaultProject.dueDate),{weekStartsOn:1})&&k(L.defaultProject[L.defaultProject.length-1]);else if(S.classList.contains("aside-project"))for(const e of L.projects)e.projectId===S.dataset.id&&(P(e.projectToDo),k(e.projectToDo[e.projectToDo.length-1]));j.addEventListener("submit",(function(e){e.preventDefault(),e.target.reset(),Z()}),{once:!0})}if("confirm"===w.textContent.toLowerCase().trim()){if(S.classList.contains("aside-due-dates-inbox")||S.classList.contains("aside-due-dates-today")||S.classList.contains("aside-due-dates-this-week"))for(const e of L.defaultProject)A(e);else if(S.classList.contains("aside-project"))for(const e of L.projects)for(const t of e.projectToDo)A(t);j.addEventListener("submit",(function(e){e.preventDefault(),e.target.reset(),Z()}),{once:!0})}})),p.addEventListener("click",(function(e){(e.target===this||e.target.classList.contains("modal-titlebar-logo")||e.target.closest(".modal-titlebar-logo"))&&(j.classList.contains("hide")||j.reset(),Z())}))}),{once:!0})})();